<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    

    <link rel="stylesheet" href="../styles/main.css" />
    <link rel="stylesheet" href="../styles/selection.css" />
    <link rel="stylesheet" href="../styles/progressbar.css" />
    <link rel="stylesheet" href="../styles/sort.css" />

    
    <title>Supervive.io - Tier List</title>

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:400,600,700&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  <body>
    <script></script>
    <div class="container">
      <div class="components">
        <div class="header">
  <a class="title" href="/"
    ><span>
      
      <img src="./assets/supervive_logo_white.svg" alt="" />
      .io</span
    ></a
  >
  <div class="links">
    
    <a href="../tierlist">Tier List</a>
    <a href="../leaderboard">Leaderboard</a>
    <a href="../player">Player Search</a>
    

    <a href="https://supervive.wiki.gg" target="_blank">wiki.gg</a>
  </div>
</div>
 <script type="module">
  document.title =
    "Supervive.io - Tierlist";
</script>
<div class="main">
  <h1 id="page-title">TIERLIST</h1>
   <div>Data based on the top 1k ranked players</div>
<div class="tierlist flex-col">
  <div class="filter-selection">
    <form id="mode">
      <div class="radio-group mode-radio">
        <input type="radio" id="mode-0" value="BRSquad" checked name="mode" />
        <label for="mode-0" id="mode-label-0">BR Squad</label>
        <input type="radio" id="mode-1" value="BRDuos" name="mode" />
        <label for="mode-1" id="mode-label-1">BR Duos</label>
        <input type="radio" id="mode-2" value="DM" name="mode" />
        <label for="mode-2" id="mode-label-2">DM</label>
        <div class="control-background"></div>
      </div>
    </form>
  </div>
  <div class="flex-row tierlist-sort">
    <div><span>Sort by:</span></div>
    <div class="sort-name" data-sort>
      <span data-sort-key="name">Hunter name</span>
    </div>
    <div class="sort-kd" data-sort>
      <span data-sort-key="kd">Kill/Death</span>
    </div>
    <div class="sort-wr" data-sort="desc">
      <span data-sort-key="wr">Winrate</span>
    </div>
    <div class="sort-pr" data-sort>
      <span data-sort-key="pr">Pickrate</span>
    </div>
    <div></div>
  </div>
  <div hidden id="spinner"></div>
  <div id="entries" class="flex-col"></div>
</div>
<div style="text-align: start">
  <h3>Supervive info and biased opinion</h3>
  <p>
    SUPERVIVE is a WASD team-based hero battle royale (that is free-to-play!).
  </p>
  <p>
    Like most battle royales, you land in a zone with lots of other teams, and
    over time, the available zone shrinks as a circle of death comes in to force
    team fights.
  </p>
  <p>
    It also has a deathmatch arena mode, which I like more. I was a big fan of
    Battlerite, and the gameplay gives you that same feeling of pixel perfect
    hits, with the capability to 1v1 anyone with any champ, as long as you are
    better.
  </p>
  <p>
    I'm also a contributor to supervive.wiki.gg, amongst many others. General
    info can be found there, whether it's skills, items, powers, enemies, or any
    other questions you could have about the game.
  </p>
  <p>
    Use my referral code if you want
    <a
      style="text-decoration: underline"
      href="https://accounts.theorycraftgames.com/refer-a-friend?referral-code=61948ce8287a4a2ab71dde1c1fd907ea"
      >61948ce8287a4a2ab71dde1c1fd907ea</a
    >
  </p>
  <br />
  <div class="info-text">
    This site is a general overhaul of the original supervive.io by Suuyaa on
    Discord
    <img
      src="https://cdn.discordapp.com/emojis/1213269966581801032.webp"
      style="height: 1em"
      alt="myth gooby"
    />
    . All rights go to shalzuth.
  </div>
</div>
<svg class="progress_gradients" hidden>
  <defs>
    <linearGradient id="ring" x1="1" y1="0" x2="0" y2="1">
      <stop offset="25%" stop-color="var(--sv-purple)" />
      <stop offset="150%" stop-color="var(--sv-pink)" />
    </linearGradient>
  </defs>
</svg>
<svg class="progress_gradients" hidden>
  <defs>
    <linearGradient id="ring-highest-entry" x1="1" y1="0" x2="0" y2="1">
      <stop offset="25%" stop-color="gold" />
      <stop offset="150%" stop-color="var(--sv-pink)" />
    </linearGradient>
  </defs>
</svg>

<script type="module">
  Array.from(document.querySelectorAll("input")).forEach((x) =>
    x.addEventListener("change", (e) => {
      resetSortOrder();
      document.querySelector(".sort-wr").dataset.sort = "desc";
      showData();
    })
  );
  let urlParams = new URLSearchParams(window.location.search);
  let tierlistData,
    maxWr,
    minWr,
    minPr = 1;

  switch ((urlParams.get("mode") || "").toLowerCase()) {
    case "brsquad":
      document.getElementById("mode-0").click();
      break;
    case "brduos":
      document.getElementById("mode-1").click();
      break;
    case "dm":
      document.getElementById("mode-2").click();
      break;

    default:
      break;
  }

  Array.from(document.querySelectorAll("[data-sort] > span")).forEach((x) => {
    x.addEventListener("click", (e) => sortData(e));
  });

  showData();

  function sortData(e) {
    let key = e.target.dataset.sortKey;
    let sortEl = e.target.parentElement;
    resetSortOrder(sortEl);
    if (sortEl.dataset.sort !== "desc") {
      sortEl.dataset.sort = "desc";
    } else {
      sortEl.dataset.sort = "asc";
    }

    // sort tierlistData
    switch (key) {
      case "name":
        sortEl.dataset.sort === "asc"
          ? tierlistData.sort((a, b) => a.h.localeCompare(b.h))
          : tierlistData.sort((a, b) => b.h.localeCompare(a.h));
        break;
      case "kd":
        sortEl.dataset.sort === "asc"
          ? tierlistData.sort((a, b) => a.kd - b.kd)
          : tierlistData.sort((a, b) => b.kd - a.kd);
        break;
      case "pr":
        sortEl.dataset.sort === "asc"
          ? tierlistData.sort((a, b) => a.pr.v - b.pr.v)
          : tierlistData.sort((a, b) => b.pr.v - a.pr.v);
        break;
      case "wr":
        sortEl.dataset.sort === "asc"
          ? tierlistData.sort((a, b) => a.wr1.v - b.wr1.v)
          : tierlistData.sort((a, b) => b.wr1.v - a.wr1.v);
      default:
        break;
    }
    drawList(tierlistData);
  }

  function resetSortOrder(sortEl = document.createElement("div")) {
    Array.from(document.querySelectorAll("[data-sort]")).forEach((x) => {
      if (x !== sortEl) x.dataset.sort = "";
    });
  }

  async function showData() {
    let entriesEl = document.getElementById("entries");
    entriesEl.innerHTML = "";
    const spinner = document.getElementById("spinner");
    /** init loading spinner **/
    spinner.removeAttribute("hidden");
    tierlistData = await fetchTierlist();
    spinner.setAttribute("hidden", "");
    drawList(tierlistData);
  }

  async function fetchTierlist() {
    let mode = document
      .getElementById("mode")
      .querySelector("input:checked").value;

    let data = await fetch(`https://supervive.io/api/statistics/${mode}.json`)
      .then((res) => res.json())
      .then((res) => res)
      .catch((err) => console.log(err));
    data.sort((a, b) => b.wr1.v - a.wr1.v);
    let wrList = data.reduce((prev, curr) => {
      prev.push(curr.wr1.v);
      return prev;
    }, []);
    maxWr = Math.max(...wrList);
    minWr = Math.min(...wrList);
    data.forEach((x) => {
      minPr = Math.min(minPr, x.pr.v);
    });
    return data;
  }

  async function drawList(list = []) {
    let entries = document.getElementById("entries");
    entries.innerHTML = "";
    let style =
      document.getElementById("progress-anim-styles") ||
      document.createElement("style");
    document.head.append(style);
    style.id = "progress-anim-styles";
    style.type = "text/css";
    style.innerHTML = "";

    list.forEach((x, index) => {
      let entry = document.createElement("div");
      let strokeWrNum =
        2 * Math.PI * 26 * (1 - (x.wr1.v - minWr) / (maxWr - minWr));
      let strokePrNum =
        2 * Math.PI * 26 * (1 - (x.pr.v - minPr) / (x.pr.m - minPr));
      !(index % 2)
        ? entry.classList.add("entry", "neumorphic")
        : entry.classList.add("entry", "neumorphic");
      entry.style.transitionDelay = `${index * 0.05 > 3 ? 3 : index * 0.05}s`;
      entry.innerHTML = `
        <div><span>${index + 1}.</span></div>
        <a class="title" href="https://supervive.wiki.gg/wiki/${
          x.h
        }" target="_blank">
          <img src="https://assets.supervive.io/images/${
            x.h
          }.webp" alt="Hunter portrait">${x.h}
        </a>
        <div class="kd">
          <div class="flex-col">
            <span>${Math.round(x.kd * 100) / 100}</span>
            <span>Avg. K/D</span>
          </div>
        </div>
        <div class="wr" title="${x.wr1.v - maxWr ? "" : "Highest "}Winrate: ${
        Math.round(x.wr1.v * 10000) / 100
      }%">
          <svg
              class="ring"
              viewBox="0 0 60 60"
              height="60"
              width="60"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                class="ring-track"
                cx="30"
                cy="30"
                r="26"3
                fill="none"
                stroke="#7f7f7f"
                stroke-width="8"
              />
              <circle
                class="ring-stroke ${
                  x.wr1.v - maxWr ? "" : "ring-highest-entry"
                }"
                style="animation-name: ring-anim-wr-${index};"
                cx="30"
                cy="30"
                r="26"
                fill="none"
                stroke="#000"
                stroke-linecap="round"
                stroke-width="8"
                stroke-dasharray="163.36 163.36"
                stroke-dashoffset="${strokeWrNum}"
                transform="rotate(-90,30,30)"
              />
              <text style="font: bold 12px poppins; color: white" x="30" y="30" text-anchor="middle" dominant-baseline="middle"  fill="white">${
                Math.round(x.wr1.v * 10000) / 100
              }%</text>
            </svg>
          <span>Winrate</span></div>
        <div class="pr" title="Pickrate: ${Math.round(x.pr.v * 10000) / 100}%">
          <svg
              class="ring"
              viewBox="0 0 60 60"
              height="60"
              width="60"
              xmlns="http://www.w3.org/2000/svg"
            >
              <circle
                class="ring-track"
                cx="30"
                cy="30"
                r="26"3
                fill="none"
                stroke="#7f7f7f"
                stroke-width="8"
              />
              <circle
                class="ring-stroke ${
                  x.pr.v - x.pr.m ? "" : "ring-highest-entry"
                }"
                style="animation-name: ring-anim-pr-${index};"
                cx="30"
                cy="30"
                r="26"
                fill="none"
                stroke="#000"
                stroke-linecap="round"
                stroke-width="8"
                stroke-dasharray="163.36 163.36"
                stroke-dashoffset="${strokePrNum}"
                transform="rotate(-90,30,30)"
              />
              <text style="font: bold 12px poppins; color: white" x="30" y="30" text-anchor="middle" dominant-baseline="middle"  fill="white">${
                Math.round(x.pr.v * 10000) / 100
              }%</text>
            </svg>
          <span>Pickrate</span></div>
          <div></div>
        `;
      // TODO: Table view with toggle (dont normalize values, use max rates (100% wr, pickrate based on 4/2queue))
      let keyframes = `
        @keyframes ring-anim-wr-${index} {
          from {
            stroke-dashoffset: 163.36;
          }
          to {
            stroke-dashoffset: ${strokeWrNum};
          }
        }
        @keyframes ring-anim-pr-${index} {
          from {
            stroke-dashoffset: 163.36;
          }
          to {
            stroke-dashoffset: ${strokePrNum};
          }
        }
        `;
      style.innerHTML += keyframes;
      entries.append(entry);
      setTimeout(() => {
        entry.classList.add("appear");
      }, 1);
    });
    if (!list.length) {
      document.getElementById("entries").innerHTML =
        "<br>No data found.<br><br><img src='https://cdn.discordapp.com/emojis/1128037371594686544.webp?size=96&quality=lossless' alt='Elluna cry emote'>";
    }
  }
</script>
    
</div>
 <div class="footer">
  <div class="border"></div>
  <div class="info-container">
    <div class="info-column">
      <h3>REQUIRED GENERICS</h3>
      <p>
        <a href="/privacy" class="text-reset">Privacy Policy</a>
      </p>
      <p>
        <a href="/tos" class="text-reset">Terms of Service</a>
      </p>
      <p b-kamcv5kxpw="">© 2024 - shaalzuth</p>
    </div>
    <div class="info-column">
      <h3>OTHER SITES</h3>

      <p>
        <a href="https://helldivers.io" class="text-reset"
          >Helldivers Gaalactic War Status</a
        >
      </p>
      <p>
        <a href="https://d4armory.io" class="text-reset">Diablo 4 Armory</a>
      </p>
      <p>
        <a href="https://warcraftrumble.gg" class="text-reset"
          >Warcraft Rumble DB</a
        >
      </p>
    </div>
    <div class="info-column">
      <h3>CONTACT</h3>
      <p>shaalzuth @ gmail</p>
      <p>eth0logy on discord</p>
      <p><a href="/card.webp">oath image art</a> by magicologist</p>
    </div>
  </div>

  <div class="info-text">
    supervive.io isn't endorsed by Theorycraft Games, and aall associated
    properties (SUPERVIVE) are trademarks or registered trademarks of
    Theorycraft Games
  </div>
</div>

      </div>
    </div>
  </body>
  <script>
    async function getHunters() {
      let result =
        (await fetch("https://supervive.io/api/statistics/BRSquad.json")
          .then((res) => res.json())
          .then((result) => result)
          .catch((err) => console.log(err))) || [];
      let hunters = [];
      result.forEach((x) => hunters.push(x.h));
      return hunters;
    }
  </script>
</html>
